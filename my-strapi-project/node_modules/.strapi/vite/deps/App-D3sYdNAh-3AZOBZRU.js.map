{
  "version": 3,
  "sources": ["../../../@strapi/plugin-documentation/dist/_chunks/App-D3sYdNAh.mjs"],
  "sourcesContent": ["import { jsx, jsxs } from \"react/jsx-runtime\";\nimport * as React from \"react\";\nimport { Table, Thead, Tr, Th, Typography, Tbody, Td, Flex, IconButton, EmptyStateLayout, Dialog, LinkButton } from \"@strapi/design-system\";\nimport { Eye, ArrowClockwise, Trash } from \"@strapi/icons\";\nimport { useNotification, useAPIErrorHandler, useRBAC, Page, Layouts, ConfirmDialog } from \"@strapi/strapi/admin\";\nimport { useIntl } from \"react-intl\";\nimport { styled } from \"styled-components\";\nimport { P as PERMISSIONS } from \"./index-YnqsO7ap.mjs\";\nimport { u as useGetInfoQuery, a as useRegenerateDocMutation, b as useDeleteVersionMutation, g as getTrad } from \"./getTrad-BCVqzyys.mjs\";\nconst App = () => {\n  const { formatMessage } = useIntl();\n  const { toggleNotification } = useNotification();\n  const { formatAPIError } = useAPIErrorHandler();\n  const { data, isLoading: isLoadingInfo, isError } = useGetInfoQuery();\n  const [regenerate] = useRegenerateDocMutation();\n  const [deleteVersion] = useDeleteVersionMutation();\n  const [showConfirmDelete, setShowConfirmDelete] = React.useState(false);\n  const [versionToDelete, setVersionToDelete] = React.useState();\n  const { allowedActions, isLoading: isLoadingRBAC } = useRBAC(PERMISSIONS);\n  const isLoading = isLoadingInfo || isLoadingRBAC;\n  const colCount = 4;\n  const rowCount = (data?.docVersions?.length || 0) + 1;\n  const handleRegenerateDoc = (version) => {\n    regenerate({ version }).unwrap().then(() => {\n      toggleNotification({\n        type: \"success\",\n        message: formatMessage({\n          id: getTrad(\"notification.generate.success\"),\n          defaultMessage: \"Successfully generated documentation\"\n        })\n      });\n    }).catch((err) => {\n      toggleNotification({\n        type: \"warning\",\n        message: formatAPIError(err)\n      });\n    });\n  };\n  const handleConfirmDelete = async () => {\n    if (!versionToDelete) {\n      return;\n    }\n    await deleteVersion({ version: versionToDelete }).unwrap().then(() => {\n      toggleNotification({\n        type: \"success\",\n        message: formatMessage({\n          id: getTrad(\"notification.delete.success\"),\n          defaultMessage: \"Successfully deleted documentation\"\n        })\n      });\n    }).catch((err) => {\n      toggleNotification({\n        type: \"warning\",\n        message: formatAPIError(err)\n      });\n    });\n    setShowConfirmDelete(!showConfirmDelete);\n  };\n  const handleClickDelete = (version) => {\n    setVersionToDelete(version);\n    setShowConfirmDelete(!showConfirmDelete);\n  };\n  const title = formatMessage({\n    id: getTrad(\"plugin.name\"),\n    defaultMessage: \"Documentation\"\n  });\n  if (isLoading) {\n    return /* @__PURE__ */ jsx(Page.Loading, {});\n  }\n  if (isError) {\n    return /* @__PURE__ */ jsx(Page.Error, {});\n  }\n  return /* @__PURE__ */ jsxs(Layouts.Root, { children: [\n    /* @__PURE__ */ jsx(Page.Title, { children: title }),\n    /* @__PURE__ */ jsxs(Page.Main, { children: [\n      /* @__PURE__ */ jsx(\n        Layouts.Header,\n        {\n          title,\n          subtitle: formatMessage({\n            id: getTrad(\"pages.PluginPage.header.description\"),\n            defaultMessage: \"Configure the documentation plugin\"\n          }),\n          primaryAction: /* @__PURE__ */ jsx(\n            OpenDocLink,\n            {\n              disabled: !allowedActions.canRead || !data?.currentVersion || !data?.prefix,\n              href: createDocumentationHref(`${data?.prefix}/v${data?.currentVersion}`),\n              startIcon: /* @__PURE__ */ jsx(Eye, {}),\n              children: formatMessage({\n                id: getTrad(\"pages.PluginPage.Button.open\"),\n                defaultMessage: \"Open Documentation\"\n              })\n            }\n          )\n        }\n      ),\n      /* @__PURE__ */ jsx(Layouts.Content, { children: data?.docVersions.length ? /* @__PURE__ */ jsxs(Table, { colCount, rowCount, children: [\n        /* @__PURE__ */ jsx(Thead, { children: /* @__PURE__ */ jsxs(Tr, { children: [\n          /* @__PURE__ */ jsx(Th, { children: /* @__PURE__ */ jsx(Typography, { variant: \"sigma\", textColor: \"neutral600\", children: formatMessage({\n            id: getTrad(\"pages.PluginPage.table.version\"),\n            defaultMessage: \"Version\"\n          }) }) }),\n          /* @__PURE__ */ jsx(Th, { children: /* @__PURE__ */ jsx(Typography, { variant: \"sigma\", textColor: \"neutral600\", children: formatMessage({\n            id: getTrad(\"pages.PluginPage.table.generated\"),\n            defaultMessage: \"Last Generated\"\n          }) }) })\n        ] }) }),\n        /* @__PURE__ */ jsx(Tbody, { children: data.docVersions.slice(0).sort((a, b) => a.generatedDate < b.generatedDate ? 1 : -1).map((doc) => /* @__PURE__ */ jsxs(Tr, { children: [\n          /* @__PURE__ */ jsx(Td, { width: \"50%\", children: /* @__PURE__ */ jsx(Typography, { children: doc.version }) }),\n          /* @__PURE__ */ jsx(Td, { width: \"50%\", children: /* @__PURE__ */ jsx(Typography, { children: doc.generatedDate }) }),\n          /* @__PURE__ */ jsx(Td, { children: /* @__PURE__ */ jsxs(Flex, { justifyContent: \"end\", onClick: (e) => e.stopPropagation(), children: [\n            /* @__PURE__ */ jsx(\n              IconButton,\n              {\n                tag: \"a\",\n                disabled: !allowedActions.canRead,\n                href: createDocumentationHref(`${data.prefix}/v${doc.version}`),\n                variant: \"ghost\",\n                target: \"_blank\",\n                rel: \"noopener noreferrer\",\n                label: formatMessage(\n                  {\n                    id: getTrad(\"pages.PluginPage.table.icon.show\"),\n                    defaultMessage: \"Open {target}\"\n                  },\n                  { target: `${doc.version}` }\n                ),\n                children: /* @__PURE__ */ jsx(Eye, {})\n              }\n            ),\n            allowedActions.canRegenerate ? /* @__PURE__ */ jsx(\n              IconButton,\n              {\n                onClick: () => handleRegenerateDoc(doc.version),\n                variant: \"ghost\",\n                label: formatMessage(\n                  {\n                    id: getTrad(\"pages.PluginPage.table.icon.regenerate\"),\n                    defaultMessage: \"Regenerate {target}\"\n                  },\n                  { target: `${doc.version}` }\n                ),\n                children: /* @__PURE__ */ jsx(ArrowClockwise, {})\n              }\n            ) : null,\n            allowedActions.canUpdate && doc.version !== data.currentVersion ? /* @__PURE__ */ jsx(\n              IconButton,\n              {\n                onClick: () => handleClickDelete(doc.version),\n                variant: \"ghost\",\n                label: formatMessage(\n                  {\n                    id: \"global.delete-target\",\n                    defaultMessage: \"Delete {target}\"\n                  },\n                  { target: `${doc.version}` }\n                ),\n                children: /* @__PURE__ */ jsx(Trash, {})\n              }\n            ) : null\n          ] }) })\n        ] }, doc.version)) })\n      ] }) : /* @__PURE__ */ jsx(EmptyStateLayout, { content: \"\", icon: null }) }),\n      /* @__PURE__ */ jsx(Dialog.Root, { open: showConfirmDelete, onOpenChange: setShowConfirmDelete, children: /* @__PURE__ */ jsx(ConfirmDialog, { onConfirm: handleConfirmDelete }) })\n    ] })\n  ] });\n};\nconst OpenDocLink = styled(LinkButton)`\n  text-decoration: none;\n`;\nconst createDocumentationHref = (path) => {\n  if (path.startsWith(\"http\")) {\n    return path;\n  }\n  if (path.startsWith(\"/\")) {\n    return `${window.strapi.backendURL}${path}`;\n  }\n  return `${window.strapi.backendURL}/${path}`;\n};\nexport {\n  App\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,yBAA0B;AAC1B,YAAuB;AAQvB,IAAM,MAAM,MAAM;AATlB;AAUE,QAAM,EAAE,cAAc,IAAI,QAAQ;AAClC,QAAM,EAAE,mBAAmB,IAAI,gBAAgB;AAC/C,QAAM,EAAE,eAAe,IAAI,mBAAmB;AAC9C,QAAM,EAAE,MAAM,WAAW,eAAe,QAAQ,IAAI,gBAAgB;AACpE,QAAM,CAAC,UAAU,IAAI,yBAAyB;AAC9C,QAAM,CAAC,aAAa,IAAI,yBAAyB;AACjD,QAAM,CAAC,mBAAmB,oBAAoB,IAAU,eAAS,KAAK;AACtE,QAAM,CAAC,iBAAiB,kBAAkB,IAAU,eAAS;AAC7D,QAAM,EAAE,gBAAgB,WAAW,cAAc,IAAI,QAAQ,WAAW;AACxE,QAAM,YAAY,iBAAiB;AACnC,QAAM,WAAW;AACjB,QAAM,cAAY,kCAAM,gBAAN,mBAAmB,WAAU,KAAK;AACpD,QAAM,sBAAsB,CAAC,YAAY;AACvC,eAAW,EAAE,QAAQ,CAAC,EAAE,OAAO,EAAE,KAAK,MAAM;AAC1C,yBAAmB;AAAA,QACjB,MAAM;AAAA,QACN,SAAS,cAAc;AAAA,UACrB,IAAI,QAAQ,+BAA+B;AAAA,UAC3C,gBAAgB;AAAA,QAClB,CAAC;AAAA,MACH,CAAC;AAAA,IACH,CAAC,EAAE,MAAM,CAAC,QAAQ;AAChB,yBAAmB;AAAA,QACjB,MAAM;AAAA,QACN,SAAS,eAAe,GAAG;AAAA,MAC7B,CAAC;AAAA,IACH,CAAC;AAAA,EACH;AACA,QAAM,sBAAsB,YAAY;AACtC,QAAI,CAAC,iBAAiB;AACpB;AAAA,IACF;AACA,UAAM,cAAc,EAAE,SAAS,gBAAgB,CAAC,EAAE,OAAO,EAAE,KAAK,MAAM;AACpE,yBAAmB;AAAA,QACjB,MAAM;AAAA,QACN,SAAS,cAAc;AAAA,UACrB,IAAI,QAAQ,6BAA6B;AAAA,UACzC,gBAAgB;AAAA,QAClB,CAAC;AAAA,MACH,CAAC;AAAA,IACH,CAAC,EAAE,MAAM,CAAC,QAAQ;AAChB,yBAAmB;AAAA,QACjB,MAAM;AAAA,QACN,SAAS,eAAe,GAAG;AAAA,MAC7B,CAAC;AAAA,IACH,CAAC;AACD,yBAAqB,CAAC,iBAAiB;AAAA,EACzC;AACA,QAAM,oBAAoB,CAAC,YAAY;AACrC,uBAAmB,OAAO;AAC1B,yBAAqB,CAAC,iBAAiB;AAAA,EACzC;AACA,QAAM,QAAQ,cAAc;AAAA,IAC1B,IAAI,QAAQ,aAAa;AAAA,IACzB,gBAAgB;AAAA,EAClB,CAAC;AACD,MAAI,WAAW;AACb,eAAuB,wBAAI,KAAK,SAAS,CAAC,CAAC;AAAA,EAC7C;AACA,MAAI,SAAS;AACX,eAAuB,wBAAI,KAAK,OAAO,CAAC,CAAC;AAAA,EAC3C;AACA,aAAuB,yBAAK,QAAQ,MAAM,EAAE,UAAU;AAAA,QACpC,wBAAI,KAAK,OAAO,EAAE,UAAU,MAAM,CAAC;AAAA,QACnC,yBAAK,KAAK,MAAM,EAAE,UAAU;AAAA,UAC1B;AAAA,QACd,QAAQ;AAAA,QACR;AAAA,UACE;AAAA,UACA,UAAU,cAAc;AAAA,YACtB,IAAI,QAAQ,qCAAqC;AAAA,YACjD,gBAAgB;AAAA,UAClB,CAAC;AAAA,UACD,mBAA+B;AAAA,YAC7B;AAAA,YACA;AAAA,cACE,UAAU,CAAC,eAAe,WAAW,EAAC,6BAAM,mBAAkB,EAAC,6BAAM;AAAA,cACrE,MAAM,wBAAwB,GAAG,6BAAM,MAAM,KAAK,6BAAM,cAAc,EAAE;AAAA,cACxE,eAA2B,wBAAI,eAAK,CAAC,CAAC;AAAA,cACtC,UAAU,cAAc;AAAA,gBACtB,IAAI,QAAQ,8BAA8B;AAAA,gBAC1C,gBAAgB;AAAA,cAClB,CAAC;AAAA,YACH;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAA,UACgB,wBAAI,QAAQ,SAAS,EAAE,WAAU,6BAAM,YAAY,cAAyB,yBAAK,OAAO,EAAE,UAAU,UAAU,UAAU;AAAA,YACtH,wBAAI,OAAO,EAAE,cAA0B,yBAAK,IAAI,EAAE,UAAU;AAAA,cAC1D,wBAAI,IAAI,EAAE,cAA0B,wBAAI,YAAY,EAAE,SAAS,SAAS,WAAW,cAAc,UAAU,cAAc;AAAA,YACvI,IAAI,QAAQ,gCAAgC;AAAA,YAC5C,gBAAgB;AAAA,UAClB,CAAC,EAAE,CAAC,EAAE,CAAC;AAAA,cACS,wBAAI,IAAI,EAAE,cAA0B,wBAAI,YAAY,EAAE,SAAS,SAAS,WAAW,cAAc,UAAU,cAAc;AAAA,YACvI,IAAI,QAAQ,kCAAkC;AAAA,YAC9C,gBAAgB;AAAA,UAClB,CAAC,EAAE,CAAC,EAAE,CAAC;AAAA,QACT,EAAE,CAAC,EAAE,CAAC;AAAA,YACU,wBAAI,OAAO,EAAE,UAAU,KAAK,YAAY,MAAM,CAAC,EAAE,KAAK,CAAC,GAAG,MAAM,EAAE,gBAAgB,EAAE,gBAAgB,IAAI,EAAE,EAAE,IAAI,CAAC,YAAwB,yBAAK,IAAI,EAAE,UAAU;AAAA,cAC5J,wBAAI,IAAI,EAAE,OAAO,OAAO,cAA0B,wBAAI,YAAY,EAAE,UAAU,IAAI,QAAQ,CAAC,EAAE,CAAC;AAAA,cAC9F,wBAAI,IAAI,EAAE,OAAO,OAAO,cAA0B,wBAAI,YAAY,EAAE,UAAU,IAAI,cAAc,CAAC,EAAE,CAAC;AAAA,cACpG,wBAAI,IAAI,EAAE,cAA0B,yBAAK,MAAM,EAAE,gBAAgB,OAAO,SAAS,CAAC,MAAM,EAAE,gBAAgB,GAAG,UAAU;AAAA,gBACrH;AAAA,cACd;AAAA,cACA;AAAA,gBACE,KAAK;AAAA,gBACL,UAAU,CAAC,eAAe;AAAA,gBAC1B,MAAM,wBAAwB,GAAG,KAAK,MAAM,KAAK,IAAI,OAAO,EAAE;AAAA,gBAC9D,SAAS;AAAA,gBACT,QAAQ;AAAA,gBACR,KAAK;AAAA,gBACL,OAAO;AAAA,kBACL;AAAA,oBACE,IAAI,QAAQ,kCAAkC;AAAA,oBAC9C,gBAAgB;AAAA,kBAClB;AAAA,kBACA,EAAE,QAAQ,GAAG,IAAI,OAAO,GAAG;AAAA,gBAC7B;AAAA,gBACA,cAA0B,wBAAI,eAAK,CAAC,CAAC;AAAA,cACvC;AAAA,YACF;AAAA,YACA,eAAe,oBAAgC;AAAA,cAC7C;AAAA,cACA;AAAA,gBACE,SAAS,MAAM,oBAAoB,IAAI,OAAO;AAAA,gBAC9C,SAAS;AAAA,gBACT,OAAO;AAAA,kBACL;AAAA,oBACE,IAAI,QAAQ,wCAAwC;AAAA,oBACpD,gBAAgB;AAAA,kBAClB;AAAA,kBACA,EAAE,QAAQ,GAAG,IAAI,OAAO,GAAG;AAAA,gBAC7B;AAAA,gBACA,cAA0B,wBAAI,eAAgB,CAAC,CAAC;AAAA,cAClD;AAAA,YACF,IAAI;AAAA,YACJ,eAAe,aAAa,IAAI,YAAY,KAAK,qBAAiC;AAAA,cAChF;AAAA,cACA;AAAA,gBACE,SAAS,MAAM,kBAAkB,IAAI,OAAO;AAAA,gBAC5C,SAAS;AAAA,gBACT,OAAO;AAAA,kBACL;AAAA,oBACE,IAAI;AAAA,oBACJ,gBAAgB;AAAA,kBAClB;AAAA,kBACA,EAAE,QAAQ,GAAG,IAAI,OAAO,GAAG;AAAA,gBAC7B;AAAA,gBACA,cAA0B,wBAAI,cAAO,CAAC,CAAC;AAAA,cACzC;AAAA,YACF,IAAI;AAAA,UACN,EAAE,CAAC,EAAE,CAAC;AAAA,QACR,EAAE,GAAG,IAAI,OAAO,CAAC,EAAE,CAAC;AAAA,MACtB,EAAE,CAAC,QAAoB,wBAAI,kBAAkB,EAAE,SAAS,IAAI,MAAM,KAAK,CAAC,EAAE,CAAC;AAAA,UAC3D,wBAAI,OAAO,MAAM,EAAE,MAAM,mBAAmB,cAAc,sBAAsB,cAA0B,wBAAI,eAAe,EAAE,WAAW,oBAAoB,CAAC,EAAE,CAAC;AAAA,IACpL,EAAE,CAAC;AAAA,EACL,EAAE,CAAC;AACL;AACA,IAAM,cAAc,GAAO,UAAU;AAAA;AAAA;AAGrC,IAAM,0BAA0B,CAAC,SAAS;AACxC,MAAI,KAAK,WAAW,MAAM,GAAG;AAC3B,WAAO;AAAA,EACT;AACA,MAAI,KAAK,WAAW,GAAG,GAAG;AACxB,WAAO,GAAG,OAAO,OAAO,UAAU,GAAG,IAAI;AAAA,EAC3C;AACA,SAAO,GAAG,OAAO,OAAO,UAAU,IAAI,IAAI;AAC5C;",
  "names": []
}
